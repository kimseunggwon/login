# 📌login-validation-ex 연습 프로젝트 

# 개발 환경 및 기술
- Intellij IDEA Ultimate 
- Java 11
- Spring Boot 2.4.4
- validation
- thymeleaf

# 상품 관리(등록 수정) => 회원가입 => 로그인

1.홈 화면 - 로그인 전 회원 가입
로그인


2.홈 화면 - 로그인 후
본인 이름(누구님 환영합니다.) 상품 관리
로그 아웃


3.보안 요구사항
로그인 사용자만 상품에 접근하고, 관리할 수 있음
로그인 하지 않은 사용자가 상품 관리에 접근하면 로그인 화면으로 이동


4.회원 가입, 상품 관리

-------
# 필터, 인터셉터
공통 관심 사항

요구사항을 보면 로그인 한 사용자만 상품 관리 페이지에 들어갈 수 있어야 한다.
앞에서 로그인을 하지 않은 사용자에게는 상품 관리 버튼이 보이지 않기 때문에 문제가 없어 보이지만, 그런데 문제는 로그인 하지 않은 사용자도 다음 URL을 직접 호출하면 상품 관리 화면에 들어갈 수 있다는 점이다. 

-공통 관심 사항 인증해결 -> 필터, 스프링 인터셉터 사용

필터 흐름
HTTP 요청 ->WAS-> 필터 -> 서블릿 -> 컨트롤러

스프링 인터셉터 흐름
HTTP 요청 ->WAS-> 필터 -> 서블릿 -> 스프링 인터셉터 -> 컨트롤러

# 쿠키
로그인이 되면 홈 화면에 고객 이름이 보여야 한다는 요구사항을 만족하지 못한다. 로그인의 상태를 유지하면서, 로그인에 성공한 사용자는 홈 화면에 접근시 고객의 이름을 보여주려면 어떻게 해야할까?


로그인 상태 유지 = 쿠키 사용

# 세션
쿠키 값은 임의로 변경할 수 있다 (보안 문제)


"클라이언트"가 쿠키를 강제로 변경하면 다른 사용자가 된다.

=>이 문제를 해결하려면 결국 중요한 정보를 모두 "서버"에 저장해야 한다. 그리고 클라이언트와 서버는 추정 불가능한 임의의 식별자 값으로 연결해야 한다.

서버에 중요한 정보를 보관하고 연결을 유지하는 방법인 세션을 사용

서버는 클라이언트에 mySessionId 라는 이름으로 세션ID 만 쿠키에 담아서 전달하며,클라이언트는 쿠키 저장소에 mySessionId 쿠키를 보관한다.

여기서 중요한 포인트는 회원과 관련된 정보는 전혀 클라이언트에 전달하지 않는다는 것.오직 추정 불가능한 세션 ID만 쿠키를 통해 클라이언트에 전달된다.
# validation
요구사항: 검증 로직 추가 타입 검증


가격, 수량에 문자가 들어가면 검증 오류 처리 필드 검증


상품명: 필수, 공백X


가격: 1000원 이상, 1백만원 이하 수량: 최대 9999


특정 필드의 범위를 넘어서는 검증


가격 * 수량의 합은 10,000원 이상

--------
# Bean validation
